<style>
  main.container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background: linear-gradient(to right, #f0f4ff, #e0eafc);
    font-family: 'Segoe UI', sans-serif;
    padding: 1rem;
    box-sizing: border-box;
  }

  form,
  .controls,
  table {
    width: 100%;
    max-width: 100%;
    margin: 1rem 0;
  }

  input[type="text"],
  input[type="checkbox"],
  select,
  button {
    margin-right: 1rem;
    padding: 0.5rem;
    font-size: 1rem;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background-color: white;
  }

  thead {
    position: sticky;
    top: 0;
    background: #fff;
    z-index: 1;
  }

  th,
  td {
    border: 1px solid #ccc;
    padding: 0.75rem;
    text-align: left;
  }

  .table-wrapper {
    flex: 1 1 auto;
    overflow: auto;
    max-height: 100%;
  }

  @media (max-width: 768px) {
    input,
    select,
    button {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
    }
  }
</style>

<main class="container">
  <form [formGroup]="todoForm" (ngSubmit)="addTodo()">
    <input formControlName="title" placeholder="Enter todo title" required />
    <label>Completed: <input type="checkbox" formControlName="completed" /></label>
    <button type="submit" [disabled]="todoForm.invalid">Add Todo</button>
  </form>

  <div class="controls">
    <input type="text" placeholder="Search by title..." [(ngModel)]="searchTerm" />
    <select [(ngModel)]="filterStatus">
      <option value="all">All</option>
      <option value="yes">Completed</option>
      <option value="no">Not Completed</option>
    </select>
    <button (click)="toggleSort()">
      Sort by ID: {{ sortDirection === 'asc' ? 'Ascending' : 'Descending' }}
    </button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>ID</th><th>Title</th><th>Completed</th><th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of sortedList">
          <td>{{ user.id }}</td>
          <td>
            <span *ngIf="editingId !== user.id">{{ user.title  | uppercase}}</span>
            <input *ngIf="editingId === user.id" [(ngModel)]="editTitle" />
          </td>
          <td>
            <span *ngIf="editingId !== user.id">{{ user.completed ? 'Yes' : 'No' }}</span>
            <select *ngIf="editingId === user.id" [(ngModel)]="editCompleted">
              <option [ngValue]="true">Yes</option>
              <option [ngValue]="false">No</option>
            </select>
          </td>
          <td>
            <button *ngIf="editingId !== user.id" (click)="startEdit(user)">Edit</button>
            <button *ngIf="editingId === user.id" (click)="saveEdit()">Save</button>
            <button (click)="deleteTodo(user.id)">Delete</button>
          </td>
          <td>{{ user.Date | date:'HH:mm' }}</td>

        </tr>
      </tbody>
    </table>
  </div>
</main>

